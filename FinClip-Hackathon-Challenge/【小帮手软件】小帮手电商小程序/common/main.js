(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"09ab":function(e,t,n){"use strict";n.r(t);var r=n("e694"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},"455b":function(e,t,n){"use strict";var r=n("b2a8"),o=n.n(r);o.a},b2a8:function(e,t,n){},b7dc:function(e,t,n){"use strict";(function(e,t){n("2968");var r=c(n("66fd")),o=c(n("6b0c")),a=c(n("ef9c")),i=c(n("3497")),u=c(n("68fe"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";!1!==Boolean(t)&&e.showToast({title:t,duration:n,mask:r,icon:o})},d=function(){var e=getCurrentPages(),t=e[e.length-2];return t.$vm};r.default.config.productionTip=!1,r.default.prototype.$fire=new r.default,r.default.prototype.$store=o.default,r.default.prototype.$api={msg:p,prePage:d},r.default.prototype.$helper={msg:p,prePage:d},r.default.prototype.$apis=i.default,r.default.prototype.$util=u.default,a.default.mpType="app",r.default.filter("moneyFormat",(function(e){if(0===e)return 0;if(!e)return"";var t=Number(e);return isNaN(t)?e:Math.round(100*e)/100})),r.default.filter("balanceFormat",(function(e){if(0===e)return"0.00";if(!e)return"0.00";var t=Number(e);if(isNaN(t))return"0.00";var n=Math.abs(Math.round(100*e)/100);return n.toFixed(2)})),r.default.filter("sexFormat",(function(e){if(0===e)return"";if(!e)return"";var t=Number(e);return isNaN(t)?e:1===e?"男":"女"})),r.default.filter("timeFormat",(function(e){console.log("timeFormat:",e);var t=new Date(e);console.log("da:",t);var n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate(),a=t.getHours(),i=t.getMinutes(),u=t.getSeconds();return r=r>9?r:"0"+r,o=o>9?o:"0"+o,a=a>9?a:"0"+a,i=i>9?i:"0"+i,u=u>9?u:"0"+u,[n,r,o].join("-")+" "+[a,i,u].join(":")})),r.default.filter("dateFormat",(function(e){console.log("dateFormat:",e);var t=new Date(e);if(isNaN(t))return e;console.log("da:",t);var n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return r=r>9?r:"0"+r,o=o>9?o:"0"+o,[n,r,o].join("-")})),r.default.filter("richFormat",(function(e){if(!e)return"";var t=e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g," ");return t})),r.default.filter("privacyMobileFormat",(function(e){if(!e)return"";var t=Number(e);if(isNaN(t))return e;if(e.length<8)return e;var n=e.slice(0,3);console.log("pre:",n);var r=e.slice(-4);console.log("post:",r);var o=e.length-7,a=new Array(o+1).join("*");return n+a+r})),r.default.mixin({methods:{toMoney:function(e){if(0===e)return 0;if(!e)return 0;var t=Number(e);return isNaN(t)?0:Math.round(100*e)/100},formatDate:function(e,t){console.log("date:",e);var n=new Date(e);console.log("da:",n);var r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),i=n.getHours(),u=n.getMinutes(),c=n.getSeconds();return o=o>9?o:"0"+o,a=a>9?a:"0"+a,i=i>9?i:"0"+i,u=u>9?u:"0"+u,c=c>9?c:"0"+c,"date"===t?[r,o,a].join("-"):"time"===t?[i,u,c].join(":"):[r,o,a].join("-")+" "+[i,u,c].join(":")},isMobile:function(e){return!(!e||11!=e.length||isNaN(e))&&!!/(^1[3|4|5|6|7|8|9][0-9]{9}$)/.test(e)},setTabBarIndex:function(e,t,n){var r=o.default.state.editionSetting["enable_live"];console.log("enable_live:",r);var a="nolive";if(r&&(a="live"),"function"===typeof this.$mp.page.getTabBar&&this.$mp.page.getTabBar()){var i;switch(n){case"rose_red":i="#E71B64";break;case"sapphire_blue":i="#002FA7";break}this.$mp.page.getTabBar().setData({selected:e,selectedColor:i,layout:a,theme:n})}}}});var g=new r.default(l({},a.default));t(g).$mount()}).call(this,n("543d")["default"],n("543d")["createApp"])},e694:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("a34a")),o=n("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={methods:s(s({},(0,o.mapMutations)(["saveMpVersion","saveInviterCode","saveShareQuery","saveJwt","saveUserInfo"])),{},{finclipLogin:function(){var t=this;return u(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("finclipLogin"),o=e.getStorageSync("jwt")||"",console.log("jwt:",o),!o.token){n.next=8;break}a={token:o.token},t.saveJwt(a),n.next=11;break;case 8:return console.log("jwt 已经失效，需要重新执行登录流程"),n.next=11,t.$apis.auth.finclipLogin();case 11:return n.next=13,t.getUserInfo();case 13:case"end":return n.stop()}}),n)})))()},wxlogin:function(){var t=this;return u(r.default.mark((function n(){var o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("wxlogin"),o=t,n.next=4,e.checkSession({success:function(){return u(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("session_key 未过期，并且在本生命周期一直有效"),n=e.getStorageSync("jwt")||"",console.log("jwt:",n),!n.token){t.next=8;break}a={token:n.token},o.saveJwt(a),t.next=11;break;case 8:return console.log("jwt 已经失效，需要重新执行登录流程"),t.next=11,o.$apis.auth.wxlogin();case 11:return t.next=13,o.getUserInfo();case 13:case"end":return t.stop()}}),t)})))()},fail:function(){return u(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("session_key 已经失效，需要重新执行登录流程"),e.next=3,o.$apis.auth.wxlogin();case 3:return e.next=5,o.getUserInfo();case 5:case"end":return e.stop()}}),e)})))()}});case 4:case"end":return n.stop()}}),n)})))()},getUserInfo:function(){var t=this;return u(r.default.mark((function n(){var o,a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("getUserInfo"),o=e.getStorageSync("userInfo")||"",console.log("userInfo:",o),!o.nickname){n.next=8;break}a={data:o},t.saveUserInfo(a),n.next=13;break;case 8:return console.log("从数据库中获取用户信息"),n.next=11,t.$apis.auth.getUserInfo();case 11:i=n.sent,console.log("hasUserInfo:",i);case 13:case"end":return n.stop()}}),n)})))()},checkUpdate:function(){var t=this;return u(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=t,a=e.getUpdateManager(),a.onCheckForUpdate((function(t){t.hasUpdate&&a.onUpdateReady((function(t){e.showModal({title:"升级提示",content:"发现新版本，小程序升级中",showCancel:!1,success:function(e){e.confirm&&a.applyUpdate()}})}))})),a.onUpdateFailed((function(t){e.showModal({title:"升级提示",content:"小程序升级失败，请稍候重试",showCancel:!1,success:function(e){e.confirm&&o.checkUpdate()}})}));case 4:case"end":return n.stop()}}),n)})))()}}),onLaunch:function(){var e=u(r.default.mark((function e(t){var n,o,a,i,u,c,s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("App Launch"),console.log("options:",t),e.next=4,this.checkUpdate();case 4:return n=t.query.share_code,o=t.query.csc,a=decodeURIComponent(t.query.scene),console.log("share scene:",a),i=a.split(":"),console.log("share scene arr:",i),Array.isArray(i)&&i.length>1&&(n=i[0],o=i[1],u=i.slice(2),console.log("shareQuery:",u),c={data:u},this.saveShareQuery(c)),console.log("inviterCode:",n),console.log("inviterCodeCompany:",o),s={data:[n,o]},this.saveInviterCode(s),e.next=17,this.finclipLogin();case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};t.default=f}).call(this,n("543d")["default"])},ef9c:function(e,t,n){"use strict";n.r(t);var r=n("09ab");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("455b");var a,i,u,c,s=n("f0c5"),l=Object(s["a"])(r["default"],a,i,!1,null,null,null,!1,u,c);t["default"]=l.exports}},[["b7dc","common/runtime","common/vendor"]]]);